<button class="home-button" (click)="goBack()">æˆ»ã‚‹</button>

<h2 class="page-title">çµ¦ä¸ ç¤¾ä¼šä¿é™ºæ–™è¨ˆç®—</h2>

<div class="calculation-container">
  <!-- å¾“æ¥­å“¡æƒ…å ±è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div class="employee-info-section" *ngIf="employeeInfo">
    <h3>å¾“æ¥­å“¡æƒ…å ±</h3>
    <div class="info-grid">
      <div class="info-item">
        <span class="info-label">å¾“æ¥­å“¡ç•ªå·:</span>
        <span>{{ employeeInfo.employeeNumber }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">æ°å:</span>
        <span>{{ employeeInfo.name }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">å¹´é½¢:</span>
        <span>{{ employeeInfo.age }}æ­³</span>
      </div>
      <div class="info-item">
        <span class="info-label">äº‹æ¥­æ‰€æ‰€åœ¨åœ°:</span>
        <span>{{ employeeInfo.addressPrefecture }}</span>
      </div>
    </div>
  </div>

  <!-- å¹´åº¦é¸æŠã‚¨ãƒªã‚¢ -->
  <div class="control-section">
    <div class="control-form">
      <div class="form-row">
        <span class="form-label">å¯¾è±¡å¹´åº¦:</span>
        <div class="year-controls" *ngIf="targetYear">
          <button class="year-nav-btn" (click)="previousYear()">&lt;</button>
          <span class="current-year">{{ formatFiscalYear(targetYear) }}</span>
          <button class="year-nav-btn" (click)="nextYear()">&gt;</button>
          <button class="current-year-btn" (click)="currentYear()">ç¾åœ¨å¹´åº¦</button>
        </div>
      </div>
    </div>
  </div>

  <!-- æœˆåˆ¥ç¤¾ä¼šä¿é™ºæ–™ãƒ†ãƒ¼ãƒ–ãƒ« -->
  <div class="result-table-section" *ngIf="targetYear">
    <h3 *ngIf="targetYear">{{ formatFiscalYear(targetYear) }} æœˆåˆ¥ç¤¾ä¼šä¿é™ºæ–™</h3>
    <div class="save-button-container">
      <button
        class="save-btn"
        (click)="saveMonthlyResults()"
        [disabled]="isLoading || monthlyResults.length === 0"
      >
        ğŸ“¥ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
      </button>
    </div>
    <div class="results-table-container">
      <table class="results-table">
        <thead>
          <tr>
            <th rowspan="2">å¯¾è±¡æœˆ</th>
            <th colspan="5">å¥åº·ä¿é™ºæ–™ãƒ»ä»‹è­·ä¿é™ºæ–™</th>
            <th colspan="3">åšç”Ÿå¹´é‡‘ä¿é™ºæ–™</th>
          </tr>
          <tr>
            <th>å¥åº·ä¿é™ºç­‰ç´š</th>
            <th>å¥åº·ä¿é™ºæ–™(æœ¬äºº)</th>
            <th>å¥åº·ä¿é™ºæ–™(ä¼šç¤¾)</th>
            <th>ä»‹è­·ä¿é™ºæ–™(æœ¬äºº)</th>
            <th>ä»‹è­·ä¿é™ºæ–™(ä¼šç¤¾)</th>
            <th>åšç”Ÿå¹´é‡‘ç­‰ç´š</th>
            <th>åšç”Ÿå¹´é‡‘ä¿é™ºæ–™(æœ¬äºº)</th>
            <th>åšç”Ÿå¹´é‡‘ä¿é™ºæ–™(ä¼šç¤¾)</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let result of monthlyResults">
            <td>{{ result.year }}å¹´ {{ result.month }}æœˆ</td>
            <td>{{ result.healthInsuranceGrade }}</td>
            <td>{{ result.healthInsuranceFeeEmployee }}</td>
            <td>{{ result.healthInsuranceFeeCompany }}</td>
            <td>{{ result.careInsuranceFeeEmployee }}</td>
            <td>{{ result.careInsuranceFeeCompany }}</td>
            <td>{{ result.pensionInsuranceGrade }}</td>
            <td>{{ result.pensionInsuranceFeeEmployee }}</td>
            <td>{{ result.pensionInsuranceFeeCompany }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ã“ã®ä¸‹ã«çµ¦ä¸è¨ˆç®—ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¿½åŠ ã•ã‚Œã¾ã™ -->
</div>
