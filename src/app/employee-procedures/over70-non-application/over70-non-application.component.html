<div class="over70-non-application-container">
  <button mat-button color="primary" routerLink="/employee-procedures/application-form/{{ uid }}">
    各種申請画面へ戻る
  </button>

  <h2 class="detail-title">{{ userName }}さんの厚生年金保険７０歳以上被用者不該当届</h2>

  <div class="button-group">
    <ng-container *ngIf="!isEditing">
      <button mat-raised-button color="primary" (click)="onEdit()">編集</button>
      <button mat-raised-button color="accent" (click)="onExportCSV()">CSV出力</button>
    </ng-container>
    <ng-container *ngIf="isEditing">
      <button mat-raised-button color="primary" (click)="onSave()">保存</button>
      <button mat-button (click)="onCancel()">キャンセル</button>
    </ng-container>
  </div>

  <form [formGroup]="form" class="form-container">
    <!-- 提出年月日セクション -->
    <div class="form-section submission-section">
      <div class="section-header">
        <mat-icon>calendar_today</mat-icon>
        <h3>提出年月日</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="submission-era">和暦</label>
          <input
            id="submission-era"
            type="text"
            formControlName="提出年月日和暦"
            [readonly]="!isEditing"
            placeholder="令和○年"
          />
        </div>
        <div class="form-group date-group">
          <label for="submission-year">年月日</label>
          <div class="date-inputs">
            <input
              id="submission-year"
              type="number"
              formControlName="提出年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="提出年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="提出年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 事業所情報セクション -->
    <div class="form-section office-section">
      <div class="section-header">
        <mat-icon>business</mat-icon>
        <h3>事業所情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="office-prefecture">事業所整理記号（都道府県）</label>
          <input
            id="office-prefecture"
            type="text"
            formControlName="事業所整理記号都道府県コード"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="office-city">事業所整理記号（郡市区）</label>
          <input
            id="office-city"
            type="text"
            formControlName="事業所整理記号郡市区符号"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="office-number">事業所整理記号（事業所記号）</label>
          <input
            id="office-number"
            type="text"
            formControlName="事業所整理記号事業所記号"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group full-width">
          <label for="office-address">事業所所在地</label>
          <input
            id="office-address"
            type="text"
            formControlName="事業所所在地"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group full-width">
          <label for="office-name">事業所名称</label>
          <input
            id="office-name"
            type="text"
            formControlName="事業所名称"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="employer-name">事業主氏名</label>
          <input
            id="employer-name"
            type="text"
            formControlName="事業主氏名"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="phone-number">電話番号</label>
          <input id="phone-number" type="tel" formControlName="電話番号" [readonly]="!isEditing" />
        </div>
        <div class="form-group full-width">
          <label for="labor-consultant">社会保険労務士氏名</label>
          <input
            id="labor-consultant"
            type="text"
            formControlName="社会保険労務士氏名"
            [readonly]="!isEditing"
          />
        </div>
      </div>
    </div>

    <!-- 被保険者情報セクション -->
    <div class="form-section insured-section">
      <div class="section-header">
        <mat-icon>person</mat-icon>
        <h3>被保険者情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="insured-number">被保険者整理番号</label>
          <input
            id="insured-number"
            type="text"
            formControlName="被保険者整理番号"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="insured-name-kana">被保険者氏名（カナ）</label>
          <input
            id="insured-name-kana"
            type="text"
            formControlName="被保険者氏名カナ"
            [readonly]="!isEditing"
            placeholder="姓と名の間に全角スペース"
          />
        </div>
        <div class="form-group">
          <label for="insured-name-kanji">被保険者氏名（漢字）</label>
          <input
            id="insured-name-kanji"
            type="text"
            formControlName="被保険者氏名漢字"
            [readonly]="!isEditing"
            placeholder="姓と名の間に全角スペース"
          />
        </div>
        <div class="form-group date-group">
          <label for="birth-year">生年月日</label>
          <div class="date-inputs">
            <input
              id="birth-year"
              type="number"
              formControlName="被保険者生年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="被保険者生年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="被保険者生年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
        <div class="form-group">
          <label for="personal-number">個人番号（または基礎年金番号）</label>
          <input
            id="personal-number"
            type="text"
            formControlName="個人番号または基礎年金番号"
            [readonly]="!isEditing"
            placeholder="死亡の場合は基礎年金番号"
          />
        </div>
      </div>
    </div>

    <!-- 喪失情報セクション -->
    <div class="form-section loss-section">
      <div class="section-header">
        <mat-icon>event_busy</mat-icon>
        <h3>喪失情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group date-group">
          <label for="loss-year">喪失年月日</label>
          <div class="date-inputs">
            <input
              id="loss-year"
              type="number"
              formControlName="喪失年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="喪失年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="喪失年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
        <div class="form-group">
          <label for="loss-reason">喪失原因</label>
          <select id="loss-reason" formControlName="喪失原因" [disabled]="!isEditing">
            <option value="">選択してください</option>
            <option *ngFor="let reason of nonApplicableReasons" [value]="reason">
              {{ reason }}
            </option>
          </select>
        </div>
      </div>
      <div class="loss-date-notes">
        <h5>喪失年月日の入力について</h5>
        <ul>
          <li><strong>4.退職等の場合：</strong>退職等した日の翌日</li>
          <li><strong>5.死亡の場合：</strong>死亡日の翌日</li>
          <li><strong>7.75歳到達の場合：</strong>75歳の誕生日の当日</li>
          <li><strong>9.障害認定の場合：</strong>障害認定を受けた日</li>
          <li>
            <strong>11.社会保障協定の場合：</strong
            >協定発効の当日または相手国法令の適用となった日の翌日
          </li>
        </ul>
      </div>
    </div>

    <!-- 70歳不該当情報セクション -->
    <div class="form-section age70-non-applicable-section">
      <div class="section-header">
        <mat-icon>cancel</mat-icon>
        <h3>70歳不該当情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group checkbox-group">
          <label for="age70-non-applicable-check">
            <input
              id="age70-non-applicable-check"
              type="checkbox"
              formControlName="70歳不該当チェック"
              [disabled]="!isEditing"
            />
            70歳以上被用者不該当
          </label>
        </div>
        <div class="form-group date-group">
          <label for="age70-non-applicable-year">70歳不該当年月日</label>
          <div class="date-inputs">
            <input
              id="age70-non-applicable-year"
              type="number"
              formControlName="70歳不該当年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="70歳不該当年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="70歳不該当年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
      </div>
      <div class="non-applicable-notes">
        <p>
          <strong>注意：</strong
          >70歳以上被用者が退職・死亡により不該当となる場合、上記チェックボックスにチェックを付けて、不該当年月日に「退職日」または「死亡日」の当日を入力してください。
        </p>
      </div>
    </div>

    <!-- その他・備考セクション -->
    <div class="form-section other-section">
      <div class="section-header">
        <mat-icon>note</mat-icon>
        <h3>その他・備考</h3>
      </div>
      <div class="form-grid">
        <div class="form-group full-width">
          <label for="remarks">備考</label>
          <textarea id="remarks" formControlName="備考" [readonly]="!isEditing" rows="3"></textarea>
        </div>
        <div class="form-group full-width">
          <label for="attachments">添付書類確認</label>
          <textarea
            id="attachments"
            formControlName="添付書類確認"
            [readonly]="!isEditing"
            rows="2"
            placeholder="添付書類の確認事項を記載"
          ></textarea>
        </div>
      </div>
    </div>
  </form>

  <!-- 注意事項 -->
  <div class="notice-section">
    <h4>注意事項</h4>
    <ul>
      <li>
        <strong>申請する届書：</strong
        >70歳以上の従業員が退職した場合は、下側のチェックボックスを選択してください。
      </li>
      <li>
        <strong>事業所整理記号：</strong
        >都道府県コード、郡市区符号、事業所記号を左側から順に入力してください。
      </li>
      <li>
        <strong>被保険者氏名：</strong
        >カナ氏名、漢字氏名いずれも全角で入力し、姓と名の間に「全角スペース」を1文字分入れてください。
      </li>
      <li>
        <strong>個人番号：</strong
        >個人番号または基礎年金番号を入力してください。死亡による資格喪失の場合は、基礎年金番号を入力してください。
      </li>
      <li>
        <strong>70歳不該当：</strong
        >70歳以上被用者が退職・死亡により不該当となる場合、チェックボックスにチェックを付けて、不該当年月日に「退職日」または「死亡日」の当日を入力してください。
      </li>
    </ul>
  </div>
</div>
