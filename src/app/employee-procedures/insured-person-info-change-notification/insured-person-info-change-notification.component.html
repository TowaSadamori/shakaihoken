<div class="insured-person-name-address-change-container">
  <button mat-button color="primary" routerLink="/employee-procedures/application-form/{{ uid }}">
    <mat-icon>arrow_back</mat-icon>
    各種申請画面へ戻る
  </button>

  <h2 class="detail-title">
    {{ userName }}さんの健康保険・厚生年金保険 被保険者氏名変更（訂正）届／住所変更届
  </h2>

  <div class="button-group">
    <ng-container *ngIf="!isEditing">
      <button mat-raised-button color="primary" (click)="onEdit()">
        <mat-icon>edit</mat-icon>
        編集
      </button>
      <button mat-raised-button color="accent" (click)="onExportCSV()">
        <mat-icon>download</mat-icon>
        CSV出力
      </button>
    </ng-container>
    <ng-container *ngIf="isEditing">
      <button mat-raised-button color="primary" (click)="onSave()">
        <mat-icon>save</mat-icon>
        保存
      </button>
      <button mat-button (click)="onCancel()">
        <mat-icon>cancel</mat-icon>
        キャンセル
      </button>
    </ng-container>
  </div>

  <form [formGroup]="form" class="form-container">
    <!-- 提出年月日セクション -->
    <div class="form-section submission-date-section">
      <div class="section-header">
        <mat-icon>calendar_today</mat-icon>
        <h3>提出年月日</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="submission-date-era">提出年月日（和暦）</label>
          <input
            id="submission-date-era"
            type="text"
            formControlName="提出年月日和暦"
            [readonly]="!isEditing"
            placeholder="令和○年"
          />
        </div>
        <div class="form-group date-group">
          <label for="submission-year">提出年月日</label>
          <div class="date-inputs">
            <input
              id="submission-year"
              type="number"
              formControlName="提出年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="提出年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="提出年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 事業所整理記号セクション -->
    <div class="form-section office-symbol-section">
      <div class="section-header">
        <mat-icon>business</mat-icon>
        <h3>事業所整理記号</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="office-symbol-1">事業所整理記号（1）</label>
          <input
            id="office-symbol-1"
            type="text"
            formControlName="事業所整理記号1"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="office-symbol-2">事業所整理記号（2）</label>
          <input
            id="office-symbol-2"
            type="text"
            formControlName="事業所整理記号2"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="office-symbol-3">事業所整理記号（3）</label>
          <input
            id="office-symbol-3"
            type="text"
            formControlName="事業所整理記号3"
            [readonly]="!isEditing"
          />
        </div>
      </div>
    </div>

    <!-- 被保険者情報セクション -->
    <div class="form-section insured-person-section">
      <div class="section-header">
        <mat-icon>person</mat-icon>
        <h3>被保険者情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="insured-symbol">被保険者証記号</label>
          <input
            id="insured-symbol"
            type="text"
            formControlName="被保険者証記号"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="personal-number">個人番号または基礎年金番号</label>
          <input
            id="personal-number"
            type="text"
            formControlName="個人番号または基礎年金番号"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="birth-date-era">生年月日（和暦）</label>
          <input
            id="birth-date-era"
            type="text"
            formControlName="生年月日和暦"
            [readonly]="!isEditing"
            placeholder="令和○年"
          />
        </div>
        <div class="form-group date-group">
          <label for="birth-year">生年月日</label>
          <div class="date-inputs">
            <input
              id="birth-year"
              type="number"
              formControlName="生年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="生年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="生年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 被保険者氏名（変更後）セクション -->
    <div class="form-section name-change-section">
      <div class="section-header">
        <mat-icon>edit</mat-icon>
        <h3>被保険者氏名（変更後）</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="new-name-kana">被保険者氏名（フリガナ）</label>
          <input
            id="new-name-kana"
            type="text"
            formControlName="被保険者氏名変更後フリガナ"
            [readonly]="!isEditing"
            placeholder="ヤマダ タロウ"
          />
        </div>
        <div class="form-group">
          <label for="new-name-kanji">被保険者氏名（漢字）</label>
          <input
            id="new-name-kanji"
            type="text"
            formControlName="被保険者氏名変更後漢字"
            [readonly]="!isEditing"
            placeholder="山田 太郎"
          />
        </div>
      </div>
    </div>

    <!-- 変更年月日セクション -->
    <div class="form-section change-date-section">
      <div class="section-header">
        <mat-icon>event</mat-icon>
        <h3>変更年月日</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="change-date-era">変更年月日（和暦）</label>
          <input
            id="change-date-era"
            type="text"
            formControlName="変更年月日和暦"
            [readonly]="!isEditing"
            placeholder="令和○年"
          />
        </div>
        <div class="form-group date-group">
          <label for="change-year">変更年月日</label>
          <div class="date-inputs">
            <input
              id="change-year"
              type="number"
              formControlName="変更年月日年"
              [readonly]="!isEditing"
              placeholder="年"
            />
            <span>年</span>
            <input
              type="number"
              formControlName="変更年月日月"
              [readonly]="!isEditing"
              placeholder="月"
            />
            <span>月</span>
            <input
              type="number"
              formControlName="変更年月日日"
              [readonly]="!isEditing"
              placeholder="日"
            />
            <span>日</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 備考セクション -->
    <div class="form-section remarks-section">
      <div class="section-header">
        <mat-icon>note</mat-icon>
        <h3>備考</h3>
      </div>
      <div class="form-grid">
        <div class="form-group full-width">
          <label for="remarks">備考</label>
          <textarea id="remarks" formControlName="備考" [readonly]="!isEditing" rows="2"></textarea>
        </div>
      </div>
    </div>

    <!-- 事業所情報セクション -->
    <div class="form-section office-info-section">
      <div class="section-header">
        <mat-icon>location_city</mat-icon>
        <h3>事業所情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group full-width">
          <label for="office-address">事業所所在地</label>
          <input
            id="office-address"
            type="text"
            formControlName="事業所所在地"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group full-width">
          <label for="office-name">事業所名称</label>
          <input
            id="office-name"
            type="text"
            formControlName="事業所名称"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="employer-name">事業主氏名</label>
          <input
            id="employer-name"
            type="text"
            formControlName="事業主氏名"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="phone-number">電話番号</label>
          <input id="phone-number" type="tel" formControlName="電話番号" [readonly]="!isEditing" />
        </div>
      </div>
    </div>

    <!-- 社会保険労務士情報セクション -->
    <div class="form-section labor-consultant-section">
      <div class="section-header">
        <mat-icon>account_balance</mat-icon>
        <h3>社会保険労務士情報</h3>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label for="consultant-office-number">社会保険労務士事務所整理番号</label>
          <input
            id="consultant-office-number"
            type="text"
            formControlName="社会保険労務士事務所整理番号"
            [readonly]="!isEditing"
          />
        </div>
        <div class="form-group">
          <label for="consultant-name">社会保険労務士氏名</label>
          <input
            id="consultant-name"
            type="text"
            formControlName="社会保険労務士氏名"
            [readonly]="!isEditing"
          />
        </div>
      </div>
    </div>

    <!-- その他・備考セクション -->
    <div class="form-section other-section">
      <div class="section-header">
        <mat-icon>description</mat-icon>
        <h3>その他・備考</h3>
      </div>
      <div class="form-grid">
        <div class="form-group full-width">
          <label for="attachments">添付書類確認</label>
          <textarea
            id="attachments"
            formControlName="添付書類確認"
            [readonly]="!isEditing"
            rows="2"
            placeholder="添付書類の確認事項を記載"
          ></textarea>
        </div>
        <div class="form-group full-width">
          <label for="remarks-detail">備考詳細</label>
          <textarea
            id="remarks-detail"
            formControlName="備考詳細"
            [readonly]="!isEditing"
            rows="3"
          ></textarea>
        </div>
      </div>
    </div>
  </form>

  <!-- 注意事項 -->
  <div class="notice-section">
    <h4>注意事項</h4>
    <ul>
      <li>氏名変更（訂正）の場合は、戸籍謄本等の添付書類が必要です。</li>
      <li>住所変更の場合は、住民票の写し等の添付書類が必要です。</li>
      <li>事業所整理記号は3つの部分に分けて正確に入力してください。</li>
      <li>変更年月日は実際に変更が行われた日付を入力してください。</li>
    </ul>
  </div>
</div>
